---
title: "AreaAttribute?"
---
<div class="note">
   <p>
      Imported from the CodePlex archive for reference purposes. <b>Support for MvcCodeRouting has ended.</b></p>
</div>
<div id="post598194" class="discussion-comment op">
   <div class="discussion-header">Commented on 
      <time datetime="2011-04-15T13:24:43.917-07:00" title="2011-04-15T13:24:43.917-07:00">April 15, 2011</time>
   </div>
   <div class="discussion-message">
<p>I have run across an issue with this library when I have controllers with the same name but in different namespaces. &nbsp;For example:</p>
<p>SampleProject.Controllers.HomeController<br>
and<br>
SampleProject.Controllers.<em>Admin</em>.HomeController</p>
<p>The routes generated by the library are perfectly fine, but the issue is that the url generation mechanism of ASP NET MVC ignores the &quot;namespaces&quot; data token completely. &nbsp;this means that all of the following methods (and all of those like them) will
 generate a url to the <em>first</em> HomeController, and never the second:</p>
<p>&nbsp;</p>
<div style="color:black; background-color:white">
<pre>HtmlHelper.Action(<span style="color:#a31515">&quot;Index&quot;</span>, <span style="color:#a31515">&quot;HomeController&quot;</span>);
HtmlHelper.Action(<span style="color:#a31515">&quot;Index&quot;</span>, <span style="color:#a31515">&quot;HomeController&quot;</span>, <span style="color:blue">new</span> { namespaces = <span style="color:blue">new</span> [] {<span style="color:#a31515">&quot;SampleProject.Controllers.Admin&quot;</span>} });
HtmlHelper.Action(<span style="color:#a31515">&quot;Index&quot;</span>, <span style="color:#a31515">&quot;HomeController&quot;</span>, <span style="color:blue">new</span> { namespaces = <span style="color:blue">new</span> [] {<span style="color:#a31515">&quot;SampleProject.Controllers&quot;</span>} });
</pre>
</div>
<p>&nbsp;</p>
<p>This issue comes about because the &quot;namespaces&quot; datatoken is supported by the <em>
inbound</em>&nbsp;routing system, but not the <em>outbound</em>&nbsp;system.</p>
<p>My idea is to add an AreaAttribute that would allow you to tag a controller with an area name, which would then be added to the datatokens by MvcCodeRouting. &nbsp;That would allow you to generate urls to controllers that have the same name by differentiating
 them by areas. &nbsp;So the declaration of the admin HomeController would look like this:</p>
<p>&nbsp;</p>
<div style="color:black; background-color:white">
<pre>[Area(<span style="color:#a31515">&quot;Admin&quot;</span>)]
<span style="color:blue">public</span> <span style="color:blue">class</span> HomeController : Controller {...}
</pre>
</div>
<p>&nbsp;</p>
<p>and the call to generate a url would look like this:</p>
<p></p>
<div style="color:black; background-color:white">
<pre>HtmlHelper.Action(<span style="color:#a31515">&quot;Index&quot;</span>, <span style="color:#a31515">&quot;HomeController&quot;</span>, <span style="color:blue">new</span> { area = <span style="color:#a31515">&quot;Admin&quot;</span> });
</pre>
</div>
<p></p>
<p>&nbsp;</p>
<p>The attribute would be optional, so existing projects that use MvcCodeRouting would be&nbsp;unaffected. &nbsp;What do you think? &nbsp;I could probably come up with a patch to implement this if there are no objections.</p>
<p>Thanks! &nbsp;-tyler burd</p>
</div>
</div>
<div id="post598214" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-04-15T14:04:15.803-07:00" title="2011-04-15T14:04:15.803-07:00">April 15, 2011</time> <a href="#post598214" class="post-link">link</a></div>
   <div class="discussion-message"><p>Hi tyler,</p>
<p>This is a known unresolved issue. Your solution looks very easy to implement and compatible with ASP.NET MVC Areas (i.e. links with an "area" value).<br />However, mixing namespaces and areas sounds confusing. Also, I created this library as an alternative to areas (although it's useful even if you have all your controllers in the same namespace), so even talking about areas makes my stomach turn.</p>
<p>I'll think about this this weekend, my inclination is to try to do something with UrlHelper to make it namespace-aware.</p>
<p>Thanks for the feedback!<br />--<br />Max</p></div>
</div>
<div id="post598221" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-04-15T14:18:12.273-07:00" title="2011-04-15T14:18:12.273-07:00">April 15, 2011</time> <a href="#post598221" class="post-link">link</a></div>
   <div class="discussion-message"><p>I'm right there with you on the stomach turning. &nbsp;I guess that's why I'm using MvcCodeRouting!</p>
<p>I, too, spent some time with UrlHelper and other parts of the routing system. &nbsp;I tried the following, just for your info:</p>
<ul>
<li>Making the "area" datatoken automatically mirror the namespace of the controller. &nbsp;This had the disadvantage of having to pass in the (sometimes very long) namespace with EVERY link.</li>
<li>Creating new helper methods that loop through the Routes collection trying to find the specific route to use based on the BaseRoute data token. &nbsp;This had the disadvantage that these custom helper methods would always have to be used, rather than the standard helper methods that most developers will use. &nbsp;Also, I had to add methods to my base Controller class (for RedirectToAction), UrlHelper, and HtmlHelper, so that was a lot of places to diverge from default functionality.</li>
</ul>
<p>I've actually implemented my solution and it works, so I can give that to you as a patch if you desire. &nbsp;One addition that would be nice would be to scan the controllers for conflicting names and throw an exception when they are not disambiguated with an AreaAttribute. &nbsp;Something like this:<br /><em>ConflictingControllerNamesException</em>: "The controller SomeProject.Controllers.HomeController and SomeProject.Controllers.Admin.HomeController" have the same name; you should mark one of them with an AreaAttribute to disambiguate them. &nbsp;See http://someDocsAboutthis.com for more information."</p>
<p>I totally understand if you choose not to go this route (no pun intended), though, so let me know what you come up with and what you decide!</p>
<p>Thanks!</p>
<p>-tyler</p></div>
</div>
<div id="post598327" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-04-15T23:29:06.153-07:00" title="2011-04-15T23:29:06.153-07:00">April 15, 2011</time> <a href="#post598327" class="post-link">link</a></div>
   <div class="discussion-message"><p>Hey tyler,</p>
<p>I came up with a solution, can you help me test it?</p>
<p>The idea is that URL generation is implicitly namespace aware, e.g.&nbsp;<br />Url.Action("", "Home") can return "/" or "/Admin/Home", depending on the current route. <br />You can also qualify the controller parameter, e.g.&nbsp;<br />Url.Action("", "SampleProject.Controllers.Admin.Home")</p>
<p>Let me know what you think.</p>
<p>--<br />Max</p></div>
</div>
<div id="post599358" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-04-18T13:49:19.313-07:00" title="2011-04-18T13:49:19.313-07:00">April 18, 2011</time> <a href="#post599358" class="post-link">link</a></div>
   <div class="discussion-message"><p>Hi Max.</p>
<p>I should have some time today to check it out; I'll let you know how it works for me! &nbsp;And thanks for the effort to resolve this!</p>
<p>-tyler</p></div>
</div>
<div id="post613456" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-05-16T10:36:23.757-07:00" title="2011-05-16T10:36:23.757-07:00">May 16, 2011</time> <a href="#post613456" class="post-link">link</a></div>
   <div class="discussion-message"><p>Hi Max,</p>
<p>Sorry it has taken me a while to get back to you; I began testing the library about a week ago, and I have discovered a new issue that I *think* is related to this change:</p>
<p>Before the change I had links and forms that were created like this:</p>
<p>@Html.ActionLink("Link Text", "ActionName")<br />@Html.BeginForm(new { action = "Submit" })&nbsp;</p>
<p>Those calls now just output empty strings in the href/action attributes. &nbsp;I reverted to the old version of MvcCodeRouting and everything worked as expected.</p></div>
</div>
<div id="post613489" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-05-16T11:38:59.93-07:00" title="2011-05-16T11:38:59.93-07:00">May 16, 2011</time> <a href="#post613489" class="post-link">link</a></div>
   <div class="discussion-message">Tyler,<br>
I don't have enough information to reproduce. Could you please send me<br>
a project that reproduces the issue?<br>
--<br>
Max Toro<br>
<br>
<br>
<br>
On Mon, May 16, 2011 at 1:36 PM, [email removed] wrote:<br>
&gt; From: tylerburd<br>
&gt;<br>
&gt; Hi Max,<br>
&gt;<br>
&gt; Sorry it has taken me a while to get back to you; I began testing the<br>
&gt; library about a week ago, and I have discovered a new issue that I *think*<br>
&gt; is related to this change:<br>
&gt;<br>
&gt; Before the change I had links and forms that were created like this:<br>
&gt;<br>
&gt; @Html.ActionLink(&quot;Link Text&quot;, &quot;ActionName&quot;)<br>
&gt; @Html.BeginForm(new { action = &quot;Submit&quot; })<br>
&gt;<br>
&gt; Those calls now just output empty strings in the href/action attributes. &nbsp;I<br>
&gt; reverted to the old version of MvcCodeRouting and everything worked as<br>
&gt; expected.<br>
&gt;<br>
&gt; Read the full discussion online.<br>
&gt;<br>
&gt; To add a post to this discussion, reply to this email<br>
&gt; ([email removed])<br>
&gt;<br>
&gt; To start a new discussion for this project, email<br>
&gt; [email removed]<br>
&gt;<br>
&gt; You are receiving this email because you subscribed to this discussion on<br>
&gt; CodePlex. You can unsubscribe or change your settings on codePlex.com.<br>
&gt;<br>
&gt; Please note: Images and attachments will be removed from emails. Any posts<br>
&gt; to this discussion will also be available online at codeplex.com</div>
</div>
<div id="post613521" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-05-16T12:40:06.177-07:00" title="2011-05-16T12:40:06.177-07:00">May 16, 2011</time> <a href="#post613521" class="post-link">link</a></div>
   <div class="discussion-message"><p>Sample app created and attached to&nbsp;<a href="../issues/276.html">http://mvccoderouting.codeplex.com/workitem/276</a></p></div>
</div>
<div id="post613618" class="discussion-comment">
   <div class="discussion-header">Commented on 
      <time datetime="2011-05-16T15:54:39.833-07:00" title="2011-05-16T15:54:39.833-07:00">May 16, 2011</time> <a href="#post613618" class="post-link">link</a></div>
   <div class="discussion-message">Fixed, if you build the latest revision it should work fine.</div>
</div>